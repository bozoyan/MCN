# 🎬 BOZO-MCN 分镜脚本与图片生成器使用说明
## 📋 环境要求

1. **Python版本**: Python 3.8+
2. **API密钥**: ModelScope API密钥 (环境变量 `MODELSCOPE_SDK_TOKEN`)
3. **依赖包**: 已在 requirements_storyboard.txt 中列出

## 🚀 快速启动

### 方法1: 使用启动脚本（推荐）
```bash
# 1. 安装依赖
pip install -r requirements_storyboard.txt

# 2. 配置API密钥
export MODELSCOPE_SDK_TOKEN="your_api_key_here"

# 3. 运行启动脚本
python3 run_storyboard.py
```

### 方法2: 直接运行演示版本
```bash
# 1. 配置API密钥
export MODELSCOPE_SDK_TOKEN="your_api_key_here"

# 2. 运行演示版本
python3 storyboard_demo.py
```

## 🎯 使用流程

### 基本使用（演示版本）

1. **输入故事内容**
   - 在"故事内容"文本框中输入您的故事或创意描述
   - 示例内容已提供在占位符中

2. **生成分镜标题**
   - 点击"生成分镜标题"按钮
   - AI会分析内容并生成9个分镜标题
   - 生成的标题会显示在下方的文本框中

3. **生成分镜描述**
   - 点击"生成分镜描述"按钮
   - 基于分镜标题生成详细的视频脚本描述
   - 包含镜头语言和画面描述

4. **一键生成图片**
   - 点击"一键生成全部"按钮
   - 系统会自动生成绘图提示词并批量生成图片
   - 图片会显示在右侧预览区域

5. **导出结果**
   - 点击"导出Markdown"按钮
   - 保存包含所有标题、描述和图片链接的文档

## 🛠️ 高级功能

### 完整版本特性
- ✅ 模板管理系统
- ✅ 图片参数自定义
- ✅ 多种生成模型支持
- ✅ 批量图片导出
- ✅ 配置文件管理
- ✅ 主题切换

### 演示版本限制
- ⚠️ 使用固定的提示词模板
- ⚠️ 有限的图片参数调整
- ⚠️ 基础的导出功能

## 🔧 配置说明

### API密钥配置
```bash
# 临时配置（当前会话有效）
export MODELSCOPE_SDK_TOKEN="your_api_key_here"

# 永久配置（添加到 ~/.bashrc 或 ~/.zshrc）
echo 'export MODELSCOPE_SDK_TOKEN="your_api_key_here"' >> ~/.bashrc
source ~/.bashrc
```

### 获取API密钥
1. 访问 [ModelScope官网](https://modelscope.cn)
2. 注册账号并登录
3. 在控制台获取API密钥
4. 配置到环境变量中

## 🎨 支持的模型

### 文本生成
- **默认模型**: Qwen/Qwen3-235B-A22B-Thinking-2507
- **特点**: 支持思考过程，生成质量高

### 图片生成
- **Flux模型** (`bozoyan/F_fei`): 高质量，约60秒
- **SDXL模型** (`AI-ModelScope/stable-diffusion-xl-base-1.0`): 平衡，约20秒
- **SD1.5模型** (`AI-ModelScope/stable-diffusion-v1-5`): 快速，约10秒

## 📝 使用示例

### 示例故事内容
```
一个被遗弃的机器人在荒芜的废土中漫无目的地游荡，直到它在破旧的瓦砾下发现了一株发出微光的植物。

这是一个关于希望、守护与生命新生的故事。在遥远的未来，地球被一片荒芜的金属废墟和沙尘覆盖，文明的痕迹几近消失。一个型号老旧、机身锈迹斑斑、单眼发出微弱蓝光的废弃探险机器人，在无边的寂寥中漫无目的地游荡。它的能源即将耗尽，程序中的"探索"指令似乎也失去了意义。

直到有一天，它在一次偶然的瓦砾清理中，于一堆破旧的金属残骸下，发现了一株发出微弱荧光的小小幼苗...
```

## 🔍 故障排除

### 常见问题

1. **"API密钥未配置"错误**
   - 检查环境变量是否正确设置
   - 确认API密钥格式正确

2. **"生成失败"错误**
   - 检查网络连接
   - 确认API配额充足
   - 尝试更换生成模型

3. **图片生成缓慢**
   - 这是正常现象，高质量图片需要时间
   - 可以尝试使用更快的模型（如SD1.5）

4. **界面显示异常**
   - 尝试重启应用
   - 检查系统DPI设置

### 性能优化建议

1. **网络优化**: 使用稳定的网络连接
2. **批量处理**: 一次生成多个图片提高效率
3. **模型选择**: 根据需求选择合适的生成模型
4. **参数调整**: 根据效果调整采样参数

## 📞 技术支持

如遇到问题，请：
1. 检查本文档的故障排除部分
2. 确认环境配置正确
3. 查看应用输出的错误信息
4. 提交Issue到项目仓库

---

💡 **提示**: 建议先使用演示版本熟悉功能，再升级到完整版本享受所有高级特性！
