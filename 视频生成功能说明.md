# 视频生成功能使用说明

## 功能概述
在主程序的左侧导航栏中新增了"视频生成"按钮，点击后右侧主窗口会显示视频生成界面。该功能基于 BizyAir API 将图片转换为视频。

## 功能特点

### 1. 图片输入方式
- **图片URL**: 支持输入网络图片的URL地址
- **本地图片**: 支持上传本地图片文件（PNG、JPG、JPEG、GIF、BMP、WEBP）

### 2. 视频参数配置
- **提示词**: 输入视频生成的描述文本，如"美女跳舞"、"风景变化"等
- **预设分辨率**:
  - 480p - 16:9 (854×480)
  - 480p - 9:16 (480×854)
  - 720p - 16:9 (1280×720)
  - 720p - 9:16 (720×1280)
- **自定义尺寸**: 支持手动输入宽度和高度（256-2048像素）
- **视频时长**: 1-30秒，默认5秒
- **帧数计算**: 16帧 = 1秒，加上封面帧（例如5秒 = 81帧）

### 3. 实时进度监控
- 实时显示生成进度百分比
- 显示运行时间计数器
- 详细的操作日志记录

### 4. 结果展示
- **视频列表**: 显示所有生成的视频
- **视频预览**: 每个视频显示缩略信息和操作按钮
- **查看功能**: 在默认浏览器中打开视频
- **下载功能**: 保存视频到本地

### 5. 日志系统
- 所有操作都会记录到日志文件
- 支持查看实时日志
- 日志保存在 `logs/video_generation.log`
- 历史记录保存在 `video_history.json`

## 使用步骤

1. **打开视频生成界面**
   - 启动主程序 `storyboard_generator.py`
   - 在左侧导航栏点击"视频生成"按钮
   - 右侧主窗口会显示视频生成界面

2. **选择图片输入方式**
   - 选择"图片URL"并输入网络图片地址
   - 或选择"上传本地图片"并点击"浏览"选择本地文件

3. **输入提示词**
   - 在"视频提示词"文本框中输入描述视频内容的文字

4. **设置视频参数**
   - 选择预设分辨率或输入自定义尺寸
   - 设置视频时长（秒数会自动转换为帧数）

5. **开始生成**
   - 点击"生成视频"按钮
   - 观察进度条和状态信息
   - 等待生成完成（可能需要几分钟时间）

6. **查看和下载结果**
   - 在右侧"视频列表"标签中查看生成的视频
   - 点击"查看"按钮在浏览器中播放
   - 点击"下载"按钮保存到本地

## 技术细节

### API 接口
- 使用 BizyAir 图片转视频API
- Web App ID: 39386
- 输出格式: MP4
- 最大超时时间: 10分钟

### 错误处理
- 自动重试机制
- 详细的错误日志记录
- 友好的错误提示信息

### 性能优化
- 使用独立线程处理API请求
- 不阻塞主界面操作
- 支持任务取消功能

## 注意事项

1. **API 密钥**: 确保已正确配置 SiliconCloud API 密钥
2. **网络连接**: 生成视频需要稳定的网络连接
3. **处理时间**: 视频生成可能需要较长时间，请耐心等待
4. **存储空间**: 生成的视频会保存历史记录，注意磁盘空间

## 文件说明

- `pic2vod.py`: 视频生成功能的主要实现文件
- `logs/video_generation.log`: 操作日志文件
- `video_history.json`: 历史生成记录文件
- 在主程序 `storyboard_generator.py` 中集成了视频生成Tab

## 更新日志

- v1.0: 初始版本，支持基本的图片转视频功能
- 添加了完整的用户界面和错误处理机制
- 集成了日志记录和历史管理功能