# BOZO-MCN 多媒体编辑器 2.0 (PyQt5版本)

## 概述

这是基于 PyQt5 和 qfluentwidgets 框架重新开发的 BOZO-MCN 多媒体编辑器，相比原始的 tkinter 版本，具有更现代化的界面、更好的用户体验和更强的性能。

## 主要特性

### 🎨 界面优化
- **现代化设计**：使用 qfluentwidgets 提供的 Fluent Design 风格
- **左侧导航栏**：功能模块清晰分类，便于快速切换
- **深色主题**：默认深色主题，长时间使用更舒适
- **响应式布局**：界面元素自适应窗口大小
- **缩放图标**：专门的图标显示，界面更美观

### ⚡ 性能提升
- **多线程处理**：所有耗时操作都在后台线程执行，界面不卡顿
- **并发处理**：支持批量操作同时处理多个文件
- **实时进度**：进度条实时显示处理进度
- **智能通知**：使用 InfoBar 组件显示操作状态和结果

### 🔧 功能完整性
保持原始版本的所有功能：

1. **视频转换** 🎬
   - 转换无声视频
   - 提取音频文件
   - 批量处理支持
   - 视频分割功能

2. **图片转视频** 🖼️
   - 单张图片转视频
   - 批量图片处理
   - 多种视频尺寸预设
   - 自定义尺寸设置
   - 模糊背景效果

3. **合并视频音频** 🎵
   - 基础视频音频合并
   - 封面图片添加
   - 缩放动画效果
   - 多种滤镜类型

4. **生成字幕文件** 📝
   - API 语音转文本
   - Whisper 本地处理
   - 自定义每行字符数
   - 中文识别优化

5. **字幕转文本** 📄
   - SRT 格式转纯文本
   - 多语言 SRT 翻译
   - 编码自动检测
   - 支持 13 种语言

6. **调整字幕文件** ✏️
   - 可视化字幕编辑
   - 保持时间轴不变
   - 一行一字幕调整

7. **整合视频字幕** 🎬
   - 字幕嵌入视频
   - 自定义字体样式
   - 字幕位置设置
   - 背景色配置

## 安装依赖

```bash
pip install PyQt5 qfluentwidgets Pillow chardet requests
```

## 使用方法

### 1. 启动程序
```bash
python MCN.py
```

### 2. 功能使用
通过左侧导航栏选择相应功能模块，按照界面提示操作即可。

### 3. 文件夹结构
程序会自动创建以下工作文件夹：
- `temp/` - 临时视频文件
- `SRT/` - 字幕文件
- `speech/` - 音频文件
- `font/` - 字体文件

### 4. 环境配置
如需使用字幕翻译功能，需要设置环境变量：
```bash
export SiliconCloud_API_KEY="your_api_key"
export AIPATH="/Volumes/AI/AI/"
```

## 核心改进

### 多线程架构
- **WorkerThread** 基类提供统一的线程处理接口
- **专门化线程类**：VideoConversionThread、ImageToVideoThread、SRTGenerationThread 等
- **信号槽机制**：实时更新界面状态和进度
- **线程池管理**：ThreadPoolExecutor 控制并发数量

### 界面优化
- **BasePage** 基类统一页面功能和样式
- **FluentWindow** 主窗口提供导航功能
- **InfoBar** 通知系统提供即时反馈
- **响应式组件**：按钮、输入框等自适应布局

### 用户体验
- **实时进度显示**：长时间操作不再焦虑
- **批量处理支持**：提高工作效率
- **错误处理**：友好的错误提示和处理
- **文件拖放**：支持直观的文件选择

## 技术栈

- **UI框架**：PyQt5 + qfluentwidgets
- **多媒体处理**：FFmpeg
- **语音识别**：Whisper.cpp
- **AI翻译**：SiliconCloud API
- **图像处理**：PIL/Pillow
- **并发处理**：concurrent.futures

## 注意事项

1. **FFmpeg 依赖**：确保系统已安装 FFmpeg 并可在命令行中使用
2. **Whisper 配置**：字幕生成功能需要正确配置 whisper.cpp
3. **API密钥**：翻译功能需要有效的 SiliconCloud API 密钥
4. **内存管理**：批量处理大量文件时注意内存使用
5. **文件权限**：确保程序有读写工作目录的权限

## 开发状态

当前版本已完成所有核心功能的转换和优化，包括：
- ✅ 界面现代化改造
- ✅ 多线程架构实现
- ✅ 批量处理功能
- ✅ 错误处理优化
- ✅ 用户体验提升
- ✅ 已完成的功能

## 具体改进2.0.1
- 1. 视频分割与分辨率转换 ✓
实现了按数量分割视频的功能
新增了视频分辨率转换功能，支持：
按宽度等比例缩放
按高度等比例缩放
自定义宽高
自动处理奇偶数问题

- 2. 合并视频与音频 ✓
基础合并：合并多个视频片段并替换音频，支持添加封面
缩放合并：支持动态缩放效果，让视频更有动感

- 3. 字幕生成 ✓
修复了字幕生成失败的问题
增强了错误处理和日志输出
添加了对 Whisper 程序和模型的路径检查
改进了文件名匹配逻辑

- 4. 调整字幕 ✓
修复了编码错误问题
使用 chardet 自动检测 SRT 文件编码
支持 GBK、UTF-16 等各种编码格式

- 5. 首页功能 ✓ （新增）
创建了 AIGC 操作管理平台首页
从 
buttons.json
 动态加载按钮配置
支持按钮的执行、编辑、删除和新增
支持 conda 环境切换
提供可视化的按钮管理界面
生成了完整的 
buttons.json
 配置文件，包含 25 个常用工具按钮

### 配置文件
创建了 buttons.json，包含：
- AIGC 相关工具（20 个按钮）
- 语音处理工具（5 个按钮）
- 每个按钮配置了标题、conda 环境、工作目录和执行命令

### 技术亮点
- 动态按钮系统：通过 JSON 配置文件统一管理所有工具入口
- 右键菜单：支持右键编辑和删除按钮
- 环境隔离：自动处理 conda 环境切换
- 用户友好：简洁的对话框界面，支持所见即所得的编辑
- 自动保存：所有修改自动持久化到 JSON 文件

## 后续计划

- [ ] 添加更多视频特效
- [ ] 支持更多字幕格式
- [ ] 云端存储集成
- [ ] 插件系统开发
- [ ] 性能进一步优化

---

**版本**：2.0
**开发者**：BOZO团队
**更新时间**：2025年